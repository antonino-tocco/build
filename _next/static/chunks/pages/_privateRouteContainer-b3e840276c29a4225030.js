_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{"8rj6":function(t,e,n){"use strict";n.r(e);var r=n("o0o1"),a=n.n(r),o=n("HaE+"),c=n("ODXe"),u=n("q1tI"),s=n("/MKj"),i=n("p46w"),l=n.n(i),f=n("N39q"),p=function(){return function(t){var e;return null!==(e=l.a.get(t))&&void 0!==e?e:null}(f.a.AUTH_COOKIE_KEY)},d=n("kzYg"),v=n("E3lv");function g(t,e){return function(){var n=Object(o.a)(a.a.mark((function n(r){var o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:v.a.LOGIN_REQUEST}),n.next=3,Object(d.g)(t,e);case 3:if(!(o=n.sent).success){n.next=7;break}return r({type:v.a.LOGIN_SUCCESS,isLogged:!0}),n.abrupt("return");case 7:r((a=o.error,{type:v.a.LOGIN_ERROR,error:a,isLogged:!1}));case 8:case"end":return n.stop()}var a}),n)})));return function(t){return n.apply(this,arguments)}}()}function h(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:v.a.VERIFY_TOKEN_REQUEST}),e.next=3,Object(d.j)(t);case 3:if(!(r=e.sent).success){e.next=7;break}return n({type:v.a.VERIFY_TOKEN_SUCCESS,isLogged:!0}),e.abrupt("return");case 7:n((a=r.error,{type:v.a.VERIFY_TOKEN_ERROR,error:a,isLogged:!1}));case 8:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}()}var m=n("r9w1"),b=n("YK1M"),w=n("Iv90"),E=n("d0Tl"),O=n("RD7I"),y=u.createElement,_=Object(O.a)((function(t){return{root:{color:"#fff"},label:{color:"#fff"},input:{color:"#fff"}}}));function N(t){t.login;var e=t.logo,n=u.useState(""),r=Object(c.a)(n,2),a=r[0],o=r[1],s=u.useState(""),i=Object(c.a)(s,2),l=i[0],f=i[1],p=_();return y("div",{className:w["login-form-container"]},y("form",{className:"form"},e?y("img",{src:Object(E.a)(e)}):null,y("div",{className:"row"},y("div",{className:"col-12"},y("div",{className:"input-group"},y(m.a,{InputLabelProps:{className:p.label,classes:{focused:p.label}},InputProps:{className:p.input,classes:{focused:p.label}},fullWidth:!0,variant:"outlined",label:"Username",name:"username",value:a,onChange:function(t){return o(t.target.value)}})))),y("div",{className:"row",style:{marginTop:20}},y("div",{className:"col-12"},y("div",{className:"input-group"},y(m.a,{InputLabelProps:{className:p.label,classes:{focused:p.label}},InputProps:{className:p.input,classes:{focused:p.label}},fullWidth:!0,variant:"outlined",label:"Password",name:"password",value:l,onChange:function(t){return f(t.target.value)}})))),y("div",{className:"row",style:{position:"absolute",bottom:20,left:0,right:0}},y("div",{className:"col-12",onClick:function(){}},y(b.a,{style:{margin:"0 auto"}},"Login")))))}var R=n("hDQs"),x=u.createElement;e.default=Object(s.b)((function(t,e){var n;return{isLogged:null!==(n=t.auth.isLogged)&&void 0!==n&&n}}),(function(t){return{login:function(){var e=Object(o.a)(a.a.mark((function e(n,r){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(g(n,r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),verifyToken:function(){var e=Object(o.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(h(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))((function(t){var e,n=t.children,r=t.isLogged,s=t.login,i=t.verifyToken,l=u.useState(),f=Object(c.a)(l,2),d=f[0],v=f[1],g=function(){var t=Object(o.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(R.a)();case 3:e=t.sent,v(e),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(u.useEffect)((function(){g(),function(){var t=p();t&&t.trim().length>0&&i(t)}()}),[]),x("div",null,r?{children:n}:x(N,{login:function(t,e){t&&e&&s(t,e)},logo:null!==(e=null===d||void 0===d?void 0:d.logo)&&void 0!==e?e:null}))}))},E3lv:function(t,e,n){"use strict";e.a={LOGIN_REQUEST:"LOGIN_REQUEST",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_ERROR:"LOGIN_ERROR",VERIFY_TOKEN_REQUEST:"VERIFY_TOKEN_REQUEST",VERIFY_TOKEN_SUCCESS:"VERIFY_TOKEN_SUCCESS",VERIFY_TOKEN_ERROR:"VERIFY_TOKEN_ERROR"}},Iv90:function(t,e,n){t.exports={"login-form-container":"login_login-form-container__zRvzS"}},dpcX:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_privateRouteContainer",function(){return n("8rj6")}])},kzYg:function(t,e,n){"use strict";n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return v})),n.d(e,"e",(function(){return g})),n.d(e,"f",(function(){return h})),n.d(e,"a",(function(){return m})),n.d(e,"c",(function(){return b})),n.d(e,"b",(function(){return w})),n.d(e,"d",(function(){return E})),n.d(e,"g",(function(){return O})),n.d(e,"j",(function(){return y}));var r=n("o0o1"),a=n.n(r),o=n("HaE+"),c=n("vDqi"),u=n.n(c),s=null!=="https://facility-hub.cineca.it"?"https://facility-hub.cineca.it":"http://localhost:5000",i={login:"/auth/login",verifyToken:"/auth/verifyToken"},l={filters:function(t){return"/filters/".concat(t)},types:function(t){return"/types/".concat(t)},datasets:function(){return"/search/dataset"},models:function(){return"/search/model"}},f={datasets:function(){return"/download/dataset"},models:function(){return"/download/model"}},p=function(t){try{return t&&200===t.status?t.data:null}catch(e){throw e}},d=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r,o,c,i,f,d,v,g,h;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.data_type,r=void 0===n?null:n,o=e.query,c=e.filters,i=e.page,f=void 0===i?0:i,d=e.hitsPerPage,v=void 0===d?20:d,g="".concat(s).concat(l.datasets(),"/").concat(f,"/").concat(v),t.prev=2,t.next=5,u.a.post(g,{data_type:r,query:o,filters:c});case 5:return h=t.sent,t.abrupt("return",p(h));case 9:t.prev=9,t.t0=t.catch(2),console.error("@@@@error retrieving datasets"),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r,o,c,i,f,d,v;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.query,r=e.filters,o=e.page,c=void 0===o?0:o,i=e.hitsPerPage,f=void 0===i?20:i,d="".concat(s).concat(l.models(),"/").concat(c,"/").concat(f),t.prev=2,t.next=5,u.a.post(d,{query:n,filters:r});case 5:return v=t.sent,t.abrupt("return",p(v));case 9:t.prev=9,t.t0=t.catch(2),console.error("@@@@error retrieving datasets"),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r,o,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.indexName,r=e.type,o="".concat(s).concat(l.filters(n)),r&&(o="".concat(o,"/").concat(r)),t.prev=3,t.next=6,u.a.get(o);case 6:return c=t.sent,t.abrupt("return",p(c));case 10:t.prev=10,t.t0=t.catch(3),console.error("@@@@error retrieving data filters"),console.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(s).concat(l.types(e)),t.prev=1,t.next=4,u.a.get(n);case 4:return r=t.sent,t.abrupt("return",p(r));case 8:t.prev=8,t.t0=t.catch(1),console.error("@@@@@error retrieving data types"),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),m=function(t){var e="".concat(s).concat(f.datasets(),"/all");return t&&t.trim().length>0&&(e+="?data_type=".concat(t)),e},b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e="".concat(s).concat(f.datasets(),"?ids=").concat(t.join(","));return e},w=function(){return"".concat(s).concat(f.datasets(),"/all")},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e="".concat(s).concat(f.datasets(),"?ids=").concat(t.join(","));return e},O=function(){var t=Object(o.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(s).concat(i.login),t.prev=1,t.next=4,u.a.post(r,{username:e,password:n});case 4:if(200!==t.sent.status){t.next=7;break}return t.abrupt("return",{success:!0});case 7:return t.abrupt("return",{error:"Something was wrong"});case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",{error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}(),y=function(){var t=Object(o.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(s).concat(i.verifyToken),t.prev=1,t.next=4,u.a.post(n,{token:e});case 4:if(200!==t.sent.status){t.next=7;break}return t.abrupt("return",{success:!0});case 7:return t.abrupt("return",{error:"Something was wrong"});case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",{error:t.t0});case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},p46w:function(t,e,n){var r,a;!function(o){if(void 0===(a="function"===typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=a),!0,t.exports=o(),!!0){var c=window.Cookies,u=window.Cookies=o();u.noConflict=function(){return window.Cookies=c,u}}}((function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function a(){}function o(e,n,o){if("undefined"!==typeof document){"number"===typeof(o=t({path:"/"},a.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var c=JSON.stringify(n);/^[\{\[]/.test(c)&&(n=c)}catch(i){}n=r.write?r.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var u="";for(var s in o)o[s]&&(u+="; "+s,!0!==o[s]&&(u+="="+o[s].split(";")[0]));return document.cookie=e+"="+n+u}}function c(t,n){if("undefined"!==typeof document){for(var a={},o=document.cookie?document.cookie.split("; "):[],c=0;c<o.length;c++){var u=o[c].split("="),s=u.slice(1).join("=");n||'"'!==s.charAt(0)||(s=s.slice(1,-1));try{var i=e(u[0]);if(s=(r.read||r)(s,i)||e(s),n)try{s=JSON.parse(s)}catch(l){}if(a[i]=s,t===i)break}catch(l){}}return t?a[t]:a}}return a.set=o,a.get=function(t){return c(t,!1)},a.getJSON=function(t){return c(t,!0)},a.remove=function(e,n){o(e,"",t(n,{expires:-1}))},a.defaults={},a.withConverter=n,a}((function(){}))}))}},[["dpcX",1,2,0,3,5,8,9]]]);