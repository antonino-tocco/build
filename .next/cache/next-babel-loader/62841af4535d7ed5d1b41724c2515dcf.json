{"ast":null,"code":"import _regeneratorRuntime from \"/mnt/c/Users/enton/Workspace/cnr/build/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/mnt/c/Users/enton/Workspace/cnr/build/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/mnt/c/Users/enton/Workspace/cnr/build/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport * as React from \"react\";\nimport { getPage } from \"../helpers/dataHelper\";\nimport PageContainer from \"../components/page/pageContainer\";\nimport { useEffect } from \"react\";\nimport PageSection from \"../components/page/pageSection\";\nimport { Typography, withWidth, isWidthDown, debounce } from \"@material-ui/core\";\nimport { ContentCard } from \"../components/cards/contentCard\";\nimport * as pageStyle from './page.module.scss';\nimport pageContentStyle from \"./page.module.scss\";\nimport { useRouter } from \"next/router\";\nimport { SectionMenu } from \"../components/menu/sectionMenu\";\nimport { allowSectionsMenuMinHeight, isHeightUp } from \"../helpers/uiHelper\";\n\nfunction _Page(_ref) {\n  var _container$clientHeig, _ref3, _page$content_cards, _page$showTitle, _page$sections, _page$header_carousel, _page$variant, _page$content_cards2, _page$sections2, _page$sections3;\n\n  var params = _ref.params,\n      width = _ref.width;\n\n  var _React$useState = React.useState({}),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      page = _React$useState2[0],\n      setPage = _React$useState2[1];\n\n  var router = useRouter();\n  var container = window !== undefined ? window.document.body : null;\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      drawerOpen = _React$useState4[0],\n      setDrawerOpen = _React$useState4[1];\n\n  var _React$useState5 = React.useState((_container$clientHeig = container === null || container === void 0 ? void 0 : container.clientHeight) !== null && _container$clientHeig !== void 0 ? _container$clientHeig : 0),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      containerHeight = _React$useState6[0],\n      setContainerHeight = _React$useState6[1];\n\n  useEffect(function () {\n    var _router$asPath, _router$asPath$match;\n\n    var hash = router === null || router === void 0 ? void 0 : (_router$asPath = router.asPath) === null || _router$asPath === void 0 ? void 0 : (_router$asPath$match = _router$asPath.match(/#([a-z0-9]+)/gi)) === null || _router$asPath$match === void 0 ? void 0 : _router$asPath$match.toString();\n\n    if (!!hash) {\n      console.log('@@@@@@scroll to hash', hash);\n      setTimeout(function () {\n        var _document$getElementB;\n\n        (_document$getElementB = document.getElementById(hash.substr(1, hash.length - 1))) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.scrollIntoView();\n      }, 1000);\n    }\n  }, []);\n\n  var buildPageSection = function buildPageSection(section, index) {\n    var _section$asContainer;\n\n    return __jsx(PageSection, {\n      sectionData: section,\n      variant: !!section.variant ? section.variant : index % 2 === 0 ? 'light' : 'dark',\n      asContainer: (_section$asContainer = section === null || section === void 0 ? void 0 : section.asContainer) !== null && _section$asContainer !== void 0 ? _section$asContainer : false\n    });\n  };\n\n  var buildSectionsMenu = function buildSectionsMenu() {\n    var sections = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    return __jsx(SectionMenu, {\n      drawerOpen: drawerOpen,\n      toggleDrawer: function toggleDrawer(open) {\n        return setDrawerOpen(open);\n      },\n      sections: sections\n    });\n  };\n\n  var setup = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _page;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getPage(params.slug);\n\n            case 2:\n              _page = _context.sent;\n              setPage(_page);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function setup() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _showSectionsMenu = (page === null || page === void 0 ? void 0 : page.enableSectionsMenu) && !!(page === null || page === void 0 ? void 0 : page.sections);\n\n  var _sectionsContainerClasses = _showSectionsMenu && (isHeightUp(containerHeight, allowSectionsMenuMinHeight) ? 'col-lg-9  col-md-12 col-sm-12' : 'col-12');\n\n  var _hasContentCards = ((_ref3 = (_page$content_cards = page === null || page === void 0 ? void 0 : page.content_cards) !== null && _page$content_cards !== void 0 ? _page$content_cards : []) === null || _ref3 === void 0 ? void 0 : _ref3.length) > 0;\n\n  var _showTitle = (_page$showTitle = page === null || page === void 0 ? void 0 : page.showTitle) !== null && _page$showTitle !== void 0 ? _page$showTitle : true;\n\n  var _hasSections = !!(page === null || page === void 0 ? void 0 : page.sections) && (page === null || page === void 0 ? void 0 : (_page$sections = page.sections) === null || _page$sections === void 0 ? void 0 : _page$sections.length) > 0;\n\n  var onSizeChanged = debounce(function () {\n    var _container$clientHeig2;\n\n    setContainerHeight((_container$clientHeig2 = container === null || container === void 0 ? void 0 : container.clientHeight) !== null && _container$clientHeig2 !== void 0 ? _container$clientHeig2 : 0);\n  }, 500);\n  window.addEventListener('resize', onSizeChanged);\n  useEffect(function () {\n    setup();\n  }, []);\n  return __jsx(PageContainer, {\n    headerCarousel: (_page$header_carousel = page.header_carousel) !== null && _page$header_carousel !== void 0 ? _page$header_carousel : null,\n    fixedHeader: true,\n    transparentHeader: false,\n    showDrawerToggleButton: _showSectionsMenu && isWidthDown('lg', width),\n    openDrawer: function openDrawer() {\n      return setDrawerOpen(true);\n    },\n    variant: (_page$variant = page === null || page === void 0 ? void 0 : page.variant) !== null && _page$variant !== void 0 ? _page$variant : 'light',\n    mainClassName: 'with-fixed-header'\n  }, __jsx(\"div\", {\n    className: \"container \".concat(pageContentStyle['page-container'])\n  }, _showTitle ? __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(Typography, {\n    variant: \"h4\",\n    className: \"\".concat(pageContentStyle['page-header-label'], \" text-center\")\n  }, page === null || page === void 0 ? void 0 : page.title), __jsx(\"div\", {\n    className: pageContentStyle['page-header-divider']\n  }))) : null, _hasContentCards ? __jsx(\"div\", {\n    className: \"container \".concat(pageStyle['page-container'])\n  }, ((_page$content_cards2 = page === null || page === void 0 ? void 0 : page.content_cards) !== null && _page$content_cards2 !== void 0 ? _page$content_cards2 : []).map(function (contentCard) {\n    return __jsx(\"div\", {\n      className: \"row\",\n      style: {\n        marginBottom: 40\n      }\n    }, __jsx(ContentCard, {\n      title: contentCard === null || contentCard === void 0 ? void 0 : contentCard.title,\n      content: contentCard === null || contentCard === void 0 ? void 0 : contentCard.content,\n      actions: contentCard === null || contentCard === void 0 ? void 0 : contentCard.actions\n    }));\n  })) : null, __jsx(\"div\", {\n    className: \"row\"\n  }, _showSectionsMenu ? buildSectionsMenu((_page$sections2 = page === null || page === void 0 ? void 0 : page.sections) !== null && _page$sections2 !== void 0 ? _page$sections2 : []) : null, _hasSections ? __jsx(\"div\", {\n    className: _sectionsContainerClasses\n  }, ((_page$sections3 = page === null || page === void 0 ? void 0 : page.sections) !== null && _page$sections3 !== void 0 ? _page$sections3 : []).map(function (item, index) {\n    return buildPageSection(item, index);\n  })) : null)));\n}\n\nexport var __N_SSG = true;\nexport default withWidth()(_Page);","map":null,"metadata":{},"sourceType":"module"}