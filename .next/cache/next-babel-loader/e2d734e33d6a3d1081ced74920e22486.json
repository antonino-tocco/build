{"ast":null,"code":"var __jsx = React.createElement;\nimport * as React from \"react\";\nimport { getPage } from \"../helpers/dataHelper\";\nimport PageContainer from \"../components/page/pageContainer\";\nimport { useEffect } from \"react\";\nimport PageSection from \"../components/page/pageSection\";\nimport { Typography, withWidth, isWidthDown, debounce } from \"@material-ui/core\";\nimport { ContentCard } from \"../components/cards/contentCard\";\nimport * as pageStyle from './page.module.scss';\nimport pageContentStyle from \"./page.module.scss\";\nimport { useRouter } from \"next/router\";\nimport { SectionMenu } from \"../components/menu/sectionMenu\";\nimport { allowSectionsMenuMinHeight, isHeightUp } from \"../helpers/uiHelper\";\n\nfunction _Page({\n  params,\n  width\n}) {\n  var _container$clientHeig, _ref, _page$content_cards, _page$showTitle, _page$sections, _page$header_carousel, _page$variant, _page$content_cards2, _page$sections2, _page$sections3;\n\n  const [page, setPage] = React.useState({});\n  const router = useRouter();\n  const container = window !== undefined ? window.document.body : null;\n  const [drawerOpen, setDrawerOpen] = React.useState(false);\n  const [containerHeight, setContainerHeight] = React.useState((_container$clientHeig = container === null || container === void 0 ? void 0 : container.clientHeight) !== null && _container$clientHeig !== void 0 ? _container$clientHeig : 0);\n  useEffect(() => {\n    var _router$asPath, _router$asPath$match;\n\n    const hash = router === null || router === void 0 ? void 0 : (_router$asPath = router.asPath) === null || _router$asPath === void 0 ? void 0 : (_router$asPath$match = _router$asPath.match(/#([a-z0-9]+)/gi)) === null || _router$asPath$match === void 0 ? void 0 : _router$asPath$match.toString();\n\n    if (!!hash) {\n      console.log('@@@@@@scroll to hash', hash);\n      setTimeout(() => {\n        var _document$getElementB;\n\n        (_document$getElementB = document.getElementById(hash.substr(1, hash.length - 1))) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.scrollIntoView();\n      }, 1000);\n    }\n  }, []);\n\n  const buildPageSection = (section, index) => {\n    var _section$asContainer;\n\n    return __jsx(PageSection, {\n      sectionData: section,\n      variant: !!section.variant ? section.variant : index % 2 === 0 ? 'light' : 'dark',\n      asContainer: (_section$asContainer = section === null || section === void 0 ? void 0 : section.asContainer) !== null && _section$asContainer !== void 0 ? _section$asContainer : false\n    });\n  };\n\n  const buildSectionsMenu = (sections = []) => {\n    return __jsx(SectionMenu, {\n      drawerOpen: drawerOpen,\n      toggleDrawer: open => setDrawerOpen(open),\n      sections: sections\n    });\n  };\n\n  const setup = async () => {\n    const _page = await getPage(params.slug);\n\n    setPage(_page);\n  };\n\n  const _showSectionsMenu = (page === null || page === void 0 ? void 0 : page.enableSectionsMenu) && !!(page === null || page === void 0 ? void 0 : page.sections);\n\n  const _sectionsContainerClasses = _showSectionsMenu && (isHeightUp(containerHeight, allowSectionsMenuMinHeight) ? 'col-lg-9  col-md-12 col-sm-12' : 'col-12');\n\n  const _hasContentCards = ((_ref = (_page$content_cards = page === null || page === void 0 ? void 0 : page.content_cards) !== null && _page$content_cards !== void 0 ? _page$content_cards : []) === null || _ref === void 0 ? void 0 : _ref.length) > 0;\n\n  const _showTitle = (_page$showTitle = page === null || page === void 0 ? void 0 : page.showTitle) !== null && _page$showTitle !== void 0 ? _page$showTitle : true;\n\n  const _hasSections = !!(page === null || page === void 0 ? void 0 : page.sections) && (page === null || page === void 0 ? void 0 : (_page$sections = page.sections) === null || _page$sections === void 0 ? void 0 : _page$sections.length) > 0;\n\n  const onSizeChanged = debounce(() => {\n    var _container$clientHeig2;\n\n    setContainerHeight((_container$clientHeig2 = container === null || container === void 0 ? void 0 : container.clientHeight) !== null && _container$clientHeig2 !== void 0 ? _container$clientHeig2 : 0);\n  }, 500);\n  window.addEventListener('resize', onSizeChanged);\n  useEffect(() => {\n    setup();\n  }, []);\n  return __jsx(PageContainer, {\n    headerCarousel: (_page$header_carousel = page.header_carousel) !== null && _page$header_carousel !== void 0 ? _page$header_carousel : null,\n    fixedHeader: true,\n    transparentHeader: false,\n    showDrawerToggleButton: _showSectionsMenu && isWidthDown('lg', width),\n    openDrawer: () => setDrawerOpen(true),\n    variant: (_page$variant = page === null || page === void 0 ? void 0 : page.variant) !== null && _page$variant !== void 0 ? _page$variant : 'light',\n    mainClassName: 'with-fixed-header'\n  }, __jsx(\"div\", {\n    className: `container ${pageContentStyle['page-container']}`\n  }, _showTitle ? __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(Typography, {\n    variant: \"h4\",\n    className: `${pageContentStyle['page-header-label']} text-center`\n  }, page === null || page === void 0 ? void 0 : page.title), __jsx(\"div\", {\n    className: pageContentStyle['page-header-divider']\n  }))) : null, _hasContentCards ? __jsx(\"div\", {\n    className: `container ${pageStyle['page-container']}`\n  }, ((_page$content_cards2 = page === null || page === void 0 ? void 0 : page.content_cards) !== null && _page$content_cards2 !== void 0 ? _page$content_cards2 : []).map(contentCard => __jsx(\"div\", {\n    className: \"row\",\n    style: {\n      marginBottom: 40\n    }\n  }, __jsx(ContentCard, {\n    title: contentCard === null || contentCard === void 0 ? void 0 : contentCard.title,\n    content: contentCard === null || contentCard === void 0 ? void 0 : contentCard.content,\n    actions: contentCard === null || contentCard === void 0 ? void 0 : contentCard.actions\n  })))) : null, __jsx(\"div\", {\n    className: \"row\"\n  }, _showSectionsMenu ? buildSectionsMenu((_page$sections2 = page === null || page === void 0 ? void 0 : page.sections) !== null && _page$sections2 !== void 0 ? _page$sections2 : []) : null, _hasSections ? __jsx(\"div\", {\n    className: _sectionsContainerClasses\n  }, ((_page$sections3 = page === null || page === void 0 ? void 0 : page.sections) !== null && _page$sections3 !== void 0 ? _page$sections3 : []).map((item, index) => buildPageSection(item, index))) : null)));\n}\n\nconst getStaticProps = ({\n  params\n}) => ({\n  props: {\n    params\n  }\n});\n\nconst getStaticPaths = () => {\n  return {\n    paths: [{\n      params: {\n        slug: 'about'\n      }\n    }, {\n      params: {\n        slug: 'workflows'\n      }\n    }],\n    fallback: false\n  };\n};\n\nexport { getStaticProps, getStaticPaths };\nexport default withWidth()(_Page);","map":null,"metadata":{},"sourceType":"module"}