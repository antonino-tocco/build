{"ast":null,"code":"import _toConsumableArray from \"/mnt/c/Users/enton/Workspace/cnr/build/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/mnt/c/Users/enton/Workspace/cnr/build/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _storedHHFComm$morpho, _storedHHFComm$electr, _storedHHFComm$mod_fi;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { LocalStorageHelper } from \"../helpers/storageHelper\";\nimport { hashCode } from \"../helpers/hashHelper\";\nimport hodgkinHuxleyConstants from \"../constants/hodgkinHuxley.constants\";\nimport constants from \"../constants\";\n\nvar _storedHHFComm = LocalStorageHelper.get(constants.HHF_COMM);\n\nvar _defaultInitialState = !!_storedHHFComm ? {\n  morphology: (_storedHHFComm$morpho = _storedHHFComm === null || _storedHHFComm === void 0 ? void 0 : _storedHHFComm.morphology) !== null && _storedHHFComm$morpho !== void 0 ? _storedHHFComm$morpho : null,\n  electrophysiologies: (_storedHHFComm$electr = _storedHHFComm === null || _storedHHFComm === void 0 ? void 0 : _storedHHFComm.electrophysiologies) !== null && _storedHHFComm$electr !== void 0 ? _storedHHFComm$electr : [],\n  modFiles: (_storedHHFComm$mod_fi = _storedHHFComm === null || _storedHHFComm === void 0 ? void 0 : _storedHHFComm.mod_files) !== null && _storedHHFComm$mod_fi !== void 0 ? _storedHHFComm$mod_fi : []\n} : {\n  morphology: null,\n  electrophysiologies: [],\n  modFiles: []\n};\n\nvar _storeHHFComm = function _storeHHFComm(data) {\n  if (!!data) {\n    var newData = {};\n\n    if (!!(data === null || data === void 0 ? void 0 : data.morphology)) {\n      newData.morphology = data.morphology;\n    }\n\n    if (!!(data === null || data === void 0 ? void 0 : data.electrophysiologies)) {\n      newData.electrophysiologies = data.electrophysiologies;\n    }\n\n    if (!!data.modFiles) {\n      var _data$modFiles;\n\n      newData.mod_files = (_data$modFiles = data.modFiles) !== null && _data$modFiles !== void 0 ? _data$modFiles : [];\n    }\n\n    LocalStorageHelper.save(constants.HHF_COMM, newData);\n  }\n};\n\nexport function hodgkinHuxley() {\n  var _action$electrophysio, _action$electrophysio2, _action$modFile, _action$modFile2;\n\n  var initialState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _defaultInitialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case hodgkinHuxleyConstants.SET_MORPHOLOGY:\n      {\n        var _action$morphology;\n\n        var newState = _objectSpread(_objectSpread({}, initialState !== null && initialState !== void 0 ? initialState : _defaultInitialState), {}, {\n          type: action === null || action === void 0 ? void 0 : action.type,\n          morphology: (_action$morphology = action === null || action === void 0 ? void 0 : action.morphology) !== null && _action$morphology !== void 0 ? _action$morphology : null\n        });\n\n        _storeHHFComm(newState);\n\n        return newState;\n      }\n\n    case hodgkinHuxleyConstants.ADD_ELECTROPHYSIOLOGY:\n      var _electrophysiology = (_action$electrophysio = action === null || action === void 0 ? void 0 : action.electrophysiology) !== null && _action$electrophysio !== void 0 ? _action$electrophysio : null;\n\n      if (!!_electrophysiology) {\n        var _ref, _initialState$electro;\n\n        var electrophysiologies = (_ref = _toConsumableArray((_initialState$electro = initialState === null || initialState === void 0 ? void 0 : initialState.electrophysiologies) !== null && _initialState$electro !== void 0 ? _initialState$electro : [])) !== null && _ref !== void 0 ? _ref : [];\n        var index = electrophysiologies === null || electrophysiologies === void 0 ? void 0 : electrophysiologies.findIndex(function (item) {\n          return hashCode(JSON.stringify(_electrophysiology)) === hashCode(JSON.stringify(item));\n        });\n\n        if (index === -1) {\n          electrophysiologies === null || electrophysiologies === void 0 ? void 0 : electrophysiologies.push(_electrophysiology);\n        }\n\n        var _newState = _objectSpread(_objectSpread({}, initialState !== null && initialState !== void 0 ? initialState : _defaultInitialState), {}, {\n          type: action === null || action === void 0 ? void 0 : action.type,\n          electrophysiologies: electrophysiologies\n        });\n\n        _storeHHFComm(_newState);\n\n        return _newState;\n      }\n\n      return _objectSpread({}, initialState);\n\n    case hodgkinHuxleyConstants.REMOVE_ELECTROPHYSIOLOGY:\n      var electrophysiology = (_action$electrophysio2 = action === null || action === void 0 ? void 0 : action.electrophysiology) !== null && _action$electrophysio2 !== void 0 ? _action$electrophysio2 : null;\n\n      if (!!electrophysiology) {\n        var _ref2, _initialState$electro2;\n\n        var _electrophysiologies = (_ref2 = _toConsumableArray((_initialState$electro2 = initialState === null || initialState === void 0 ? void 0 : initialState.electrophysiologies) !== null && _initialState$electro2 !== void 0 ? _initialState$electro2 : [])) !== null && _ref2 !== void 0 ? _ref2 : [];\n\n        var _index = _electrophysiologies === null || _electrophysiologies === void 0 ? void 0 : _electrophysiologies.findIndex(function (item) {\n          return hashCode(JSON.stringify(electrophysiology)) === hashCode(JSON.stringify(item));\n        });\n\n        if (_index > -1) {\n          _electrophysiologies === null || _electrophysiologies === void 0 ? void 0 : _electrophysiologies.splice(_index, 1);\n        }\n\n        var _newState2 = _objectSpread(_objectSpread({}, initialState !== null && initialState !== void 0 ? initialState : _defaultInitialState), {}, {\n          type: action === null || action === void 0 ? void 0 : action.type,\n          electrophysiologies: _electrophysiologies\n        });\n\n        _storeHHFComm(_newState2);\n\n        return _newState2;\n      }\n\n      return _objectSpread({}, initialState !== null && initialState !== void 0 ? initialState : _defaultInitialState);\n\n    case hodgkinHuxleyConstants.ADD_MOD_FILE:\n      var _modFile = (_action$modFile = action === null || action === void 0 ? void 0 : action.modFile) !== null && _action$modFile !== void 0 ? _action$modFile : null;\n\n      if (!!_modFile) {\n        var _ref3, _initialState$modFile;\n\n        var modFiles = (_ref3 = _toConsumableArray((_initialState$modFile = initialState === null || initialState === void 0 ? void 0 : initialState.modFiles) !== null && _initialState$modFile !== void 0 ? _initialState$modFile : [])) !== null && _ref3 !== void 0 ? _ref3 : [];\n\n        var _index2 = modFiles === null || modFiles === void 0 ? void 0 : modFiles.findIndex(function (item) {\n          return hashCode(JSON.stringify(_modFile)) === hashCode(JSON.stringify(item));\n        });\n\n        if (_index2 === -1) {\n          modFiles === null || modFiles === void 0 ? void 0 : modFiles.push(_modFile);\n        }\n\n        var _newState3 = _objectSpread(_objectSpread({}, initialState !== null && initialState !== void 0 ? initialState : _defaultInitialState), {}, {\n          type: action === null || action === void 0 ? void 0 : action.type,\n          modFiles: modFiles\n        });\n\n        _storeHHFComm(_newState3);\n\n        return _newState3;\n      }\n\n      return _objectSpread({}, initialState);\n\n    case hodgkinHuxleyConstants.REMOVE_MOD_FILE:\n      var modFile = (_action$modFile2 = action === null || action === void 0 ? void 0 : action.modFile) !== null && _action$modFile2 !== void 0 ? _action$modFile2 : null;\n\n      if (!!modFile) {\n        var _ref4, _initialState$modFile2;\n\n        var _modFiles = (_ref4 = _toConsumableArray((_initialState$modFile2 = initialState === null || initialState === void 0 ? void 0 : initialState.modFiles) !== null && _initialState$modFile2 !== void 0 ? _initialState$modFile2 : [])) !== null && _ref4 !== void 0 ? _ref4 : [];\n\n        var _index3 = _modFiles === null || _modFiles === void 0 ? void 0 : _modFiles.findIndex(function (item) {\n          return hashCode(JSON.stringify(modFile)) === hashCode(JSON.stringify(item));\n        });\n\n        if (_index3 > -1) {\n          _modFiles === null || _modFiles === void 0 ? void 0 : _modFiles.splice(_index3, 1);\n        }\n\n        var _newState4 = _objectSpread(_objectSpread({}, initialState !== null && initialState !== void 0 ? initialState : _defaultInitialState), {}, {\n          type: action === null || action === void 0 ? void 0 : action.type,\n          modFiles: _modFiles\n        });\n\n        _storeHHFComm(_newState4);\n\n        return _newState4;\n      }\n\n      return _objectSpread({}, initialState !== null && initialState !== void 0 ? initialState : _defaultInitialState);\n\n    case hodgkinHuxleyConstants.CLEAR:\n      LocalStorageHelper[\"delete\"](constants.HHF_COMM);\n      return {\n        type: action === null || action === void 0 ? void 0 : action.type,\n        morphology: null,\n        modFiles: []\n      };\n\n    default:\n      return _defaultInitialState;\n  }\n}","map":null,"metadata":{},"sourceType":"module"}